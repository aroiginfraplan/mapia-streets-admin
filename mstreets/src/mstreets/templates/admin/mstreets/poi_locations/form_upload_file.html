{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}
{% block extrahead %}
    <script type="text/javascript" src="jsi18n/"></script> 
    {{ block.super }}
    {{ form.media }}
{% endblock %}
<!-- {% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}">{% endblock %} -->
{% block content %}
<style>
    div.no-line{
        border-bottom: none
    }
    .form-row {
        border-bottom: None !important;
    }
    select {
        width: 163px;
    }
    input[type=text] {
        width: 149px !important;
    }
    .laterals-config {
        display: none;
    }
</style>

<div class="colM">
    <form id="upload_poi_file" enctype="multipart/form-data" action="" method="post">
        {% csrf_token %}
        <h2>Carregar fitxer de Punts d'interès (POI)</h2>
        <br>
            <fieldset class="module aligned">
            <h3 style="margin-left: -10px">Fitxer de dades (GeoJSON)</h3>
            <div class="form-row">
                <div class="fieldBox">
                    <strong>{{form.file.label_tag}}</strong> {{form.file}}
                    <div class="error-list" style="white-space: pre-line;">{{ form.file.errors }}</div>
                </div>
            </div>
            <h3 style="margin-left: -10px">Campanya</h3>
            <div class="form-row">
                <div class="fieldBox">
                    {{ field.errors }} <strong>{{form.campaign.label_tag}}</strong> {{form.campaign}}
                </div>
            </div>
            <h3 style="margin-left: -10px">Propietats extra</h3>
            <div class="form-row">
                <div class="fieldBox">
                {{ field.errors }} {{form.epsg.label_tag}} {{form.epsg}}
                </div>
            </div>
            <div class="form-row">
                <div class="fieldBox">
                {{ field.errors }} <label for="id_x_translation">Translació X/Y/Z:</label> {{form.x_translation}}
                </div>
                <div class="fieldBox">
                {{ field.errors }} {{form.y_translation}}
                </div>
                <div class="fieldBox">
                {{ field.errors }} {{form.z_translation}}
                </div>
            </div>
            <div class="form-row">
                <div class="fieldBox">
                {{ field.errors }} {{form.tag.label_tag}} {{form.tag}}
                </div>
            </div>
            <div class="form-row">
                <div class="fieldBox">
                {{ field.errors }} {{form.color.label_tag}} {{form.color}}
                </div>
            </div>
            </fieldset>
            
        <div class="submit-row">
            <div style="text-align: right;">
                <input type="submit" name="apply" value="DESAR" style="background: var(--default-button-bg)"/>
            </div>
        </div>
    </form>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Obtenemos el checkbox y el campo varchar
    var checkbox = document.getElementById("id_has_laterals");
    var lateralsConfig = document.getElementsByClassName("laterals-config");

    // Función para mostrar u ocultar el campo varchar
    function showHideLateralsConfig() {
      if (checkbox.checked) {
        [...lateralsConfig].forEach(field => field.style.display = "block")
      } else {
        [...lateralsConfig].forEach(field => field.style.display = "none")
      }
    }

    // Llamamos a la función al cargar la página
    showHideLateralsConfig();

    // Llamamos a la función cada vez que el valor del checkbox cambie
    checkbox.addEventListener("change", function() {
      showHideLateralsConfig();
    });
  });
</script>
{% endblock %}
